{
    "caseId": "case-834567120983-use1-2025-651ac89d2340gh4c",
    "displayId": "1534892670345",
    "subject": "Lambda function timeouts when connecting to on-premises Oracle database",
    "status": "working",
    "serviceCode": "AWS Lambda",
    "categoryCode": "Customer Dependency | On-premises Connectivity",
    "submittedBy": "david.smith@techcorp.com",
    "timeCreated": "2025-04-08T14:32:18.563Z",
    "recentCommunications": {
        "communications": [
            {
            "caseId": "case-834567120983-use1-2025-651ac89d2340gh4c",
            "body": "Hello David,\n\nThank you for contacting AWS Support. I'm Michael, and I'll be assisting you with your Lambda connectivity issues.\n\nI understand your Lambda function is experiencing timeouts when attempting to connect to your on-premises Oracle database through AWS Direct Connect. After reviewing the information provided, I can confirm:\n\n1. The Lambda function is configured correctly with:\n   - Proper VPC configuration\n   - Correct security group settings\n   - Appropriate IAM roles\n   - 15-minute timeout setting\n\n2. CloudWatch Logs show:\n   - Connection attempts initiating successfully\n   - Timeouts occurring after 10-12 seconds\n   - No VPC networking errors\n\nTo help isolate this issue, please perform the following diagnostic steps:\n\n1. Run this test script from an EC2 instance in the same VPC/subnet:\npython\nimport cx_Oracle\nimport time\n\ndef test_connection():\n    start_time = time.time()\n    try:\n        connection = cx_Oracle.connect('username/password@//hostname:port/service_name')\n        print(f\"Connection successful, time taken: {time.time() - start_time} seconds\")\n        connection.close()\n    except Exception as e:\n        print(f\"Error: {e}, time taken: {time.time() - start_time} seconds\")\n\n\n2. Check your on-premises Oracle listener logs during connection attempts\n\n3. Review Direct Connect connection metrics during the timeouts\n\nBased on the timing patterns, this appears to be related to either:\n- Database connection pool exhaustion\n- Network latency across Direct Connect\n- Oracle listener configuration\n\nPlease provide:\n1. Results of the EC2 test script\n2. Current number of active database connections\n3. Oracle listener configuration\n\nBest regards,\nMichael\nAWS Support",
            "submittedBy": "Amazon Web Services",
            "timeCreated": "2025-04-08T14:38:45.891Z"
            },
            {
            "caseId": "case-834567120983-use1-2025-651ac89d2340gh4c",
            "body": "Our Lambda function is experiencing consistent timeouts when attempting to connect to our on-premises Oracle database. The function processes customer orders and needs to verify inventory levels in our legacy system.\n\nEnvironment details:\n- Account ID: 456789123012\n- Region: us-east-1\n- Lambda function name: inventory-check-prod\n- VPC: vpc-0a1b2c3d4e5f6g7h8\n- Direct Connect connection ID: dxcon-fg5678h123\n- Oracle database version: 19c\n\nConfiguration:\n- Lambda timeout: 15 minutes\n- VPC subnet: subnet-0123456789abcdef0\n- Security group: sg-0123456789abcdef0\n\nWe've verified:\n1. Direct Connect connection is active and stable\n2. Security group allows outbound traffic to on-premises CIDR\n3. On-premises firewall allows connections from VPC CIDR\n4. Database is accessible from EC2 instances in the same VPC\n\nCloudWatch Logs show timeouts occurring consistently after 10-12 seconds of connection attempts. This is blocking our order processing system.\n\nPlease help us identify if this is a Lambda configuration issue or if we need to investigate our on-premises network/database setup.",
            "submittedBy": "david.smith@techcorp.com",
            "timeCreated": "2025-04-08T14:32:18.563Z",
            "attachmentSet": []
            }
        ]
    },
    "ccEmailAddresses": ["network.team@techcorp.com", "database.team@techcorp.com"],
    "language": "en"
    }